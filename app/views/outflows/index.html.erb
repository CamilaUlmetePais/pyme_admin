<div class="ml-2">
  <%= render 'shared/notice', notice: notice %>
  <%= render 'shared/alert', alert: alert %>

  <div class="grid grid-cols-6 m-2">
    <div class="col-span-3 self-center">
      <h1 class="text-4xl font-medium"><%= I18n.t('activerecord.models.outflow.other') %></h1>
    </div>
    <div class="col-span-3 self-center justify-self-end">
      <button type="button" class="p-3 bg-blue-700 hover:bg-blue-800 rounded-md shadow-sm font-medium text-white">
        <%= link_to I18n.t('helpers.links.new_outflow'), new_outflow_path %></button>
    </div>
  </div>

  <%= render 'search_bar' %>

  <!-- Design for lg and xl viewports: table -->
  <div class="hidden lg:block">
    <table class="table-auto w-full m-2 p-2">
      <thead>
        <tr class="border border-gray-200 bg-gray-200">
          <th class="p-2 text-center text-xs text-gray-600 uppercase">
            <%= I18n.t('activerecord.attributes.outflows.total') %>
          </th>
          <th class="p-2 text-center text-xs text-gray-600 uppercase">
            <%= I18n.t('activerecord.attributes.outflows.paid') %>
          </th>
          <th class="p-2 text-center text-xs text-gray-600 uppercase">
            <%= I18n.t('activerecord.attributes.outflows.payment_method') %>
            </th>
          <th class="p-2 text-center text-xs text-gray-600 uppercase">
            <%= I18n.t('activerecord.attributes.outflows.notes') %>
          </th>
          <th class="p-2 text-center text-xs text-gray-600 uppercase">
            <%= I18n.t('activerecord.attributes.outflows.supplier_id') %>
          </th>
          <th class="p-2 text-center text-xs text-gray-600 uppercase">
            <%= I18n.t('activerecord.attributes.outflows.items') %>
          </th>
          <th class="p-2 text-center text-xs text-gray-600 uppercase">
            <%= I18n.t('activerecord.attributes.outflows.created_at') %>
          </th>
          <th class="p-2 text-center text-xs text-gray-600 uppercase">
            <%= I18n.t('activerecord.attributes.outflows.last_updated') %>
          </th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @outflows.order(created_at: :desc).each do |outflow| %>
          <tr class="border border-gray-200 bg-gray-100 hover:bg-gray-200">
            <td class="text-center">
              $ <%= number_with_precision(outflow.total, strip_insignificant_zeros: true) %>
            </td>
            <td class="text-center">
              $ <%= number_with_precision(outflow.paid, strip_insignificant_zeros: true) %>
            </td>
            <td class="text-center"><%= outflow.payment_method.capitalize %></td>
            <td class="text-center text-xs"><%= outflow.notes %></td>
            <td class="text-center text-xs"><%= outflow.supplier.name %></td>
            <td>
              <% outflow.items.each do |item| %>
                <span class="inline-block m-1 px-2 py-1 bg-sky-300 rounded-md shadow-sm">
                  <%= item.list %>
                </span>
              <% end %>
            </td>
            <td class="text-center text-xs"><%= I18n.l(outflow.created_at, format: :short) %></td>
            <td class="text-center text-xs"><%= I18n.l(outflow.updated_at, format: :short) %></td>
            <td>
              <button type='button' class="p-2 bg-blue-500 hover:bg-blue-600 rounded-md shadow-sm text-xs text-white">
                <%= link_to I18n.t('helpers.buttons.show'), outflow_path(outflow) %>
              </button>
            </td>
            <td>
              <button type='button' class="p-2 bg-green-600 hover:bg-green-700 rounded-md shadow-sm text-xs text-white">
                <%= link_to I18n.t('helpers.buttons.edit'), edit_outflow_path(outflow) %>
              </button>
            </td>
            <td>
              <div class="p-2 w-16 bg-red-600 hover:bg-red-700 rounded-md shadow-sm text-xs text-white">
                <%= button_to I18n.t('helpers.buttons.destroy'), outflow, method: :delete, data: { turbo_method: :delete, turbo_confirm: I18n.t('helpers.buttons.are_you_sure') }%>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <!-- Design for sm and md viewports: badges -->
  <div class="block lg:hidden">
    <% @outflows.order(created_at: :desc).each do |outflow| %>
      <div class="w-7/8 md:w-3/4 m-2 border border-gray-200 bg-gray-100 rounded-md shadow-sm">
        <div class="grid grid-cols-12 gap-1 p-1">
          <div class="col-span-6 align-center">
            <span class="text-xs uppercase text-gray-600"> 
              <%= I18n.t('activerecord.attributes.outflows.total') %>: 
            </span>
            $<%= number_with_precision(outflow.total, strip_insignificant_zeros: true) %>
          </div>
          <div class="col-span-6 align-center">
            <span class="text-xs uppercase text-gray-600"> 
              <%= I18n.t('activerecord.attributes.outflows.paid') %>: 
            </span>
            $<%= number_with_precision(outflow.paid, strip_insignificant_zeros: true) %>
          </div>
          <div class="col-span-8 md:col-span-6 align-center">
            <span class="text-xs uppercase text-gray-600"> 
              <%= I18n.t('activerecord.attributes.outflows.supplier_id') %>: 
            </span>
            <%= outflow.supplier.name %>
          </div>
          <div class="col-span-4 md:col-span-6 align-center">
            <span class="text-xs uppercase text-gray-600">
              <%= outflow.payment_method.capitalize %>
            </span>
          </div>
          <div class="col-span-12 align-center">
            <span class="text-xs uppercase text-gray-600">
              <%= I18n.t('activerecord.attributes.outflows.notes') %>:
            </span>
            <%= outflow.notes %>
          </div>
          <div class="col-span-12">
            <% outflow.items.each do |item| %>
              <span class="inline-block m-1 px-2 py-1 bg-sky-300 rounded-md shadow-sm">
                <%= item.list %>
              </span>
            <% end %>
          </div>
          <div class="col-span-6 text-xs uppercase text-gray-600">
            <%= I18n.t('activerecord.attributes.outflows.created_at') %>
          </div>
          <div class="col-span-6 text-xs uppercase text-gray-600">
            <%= I18n.t('activerecord.attributes.outflows.last_updated') %>
          </div>
          <div class="col-span-6">
            <%= I18n.l(outflow.created_at, format: :short) %>
          </div>
          <div class="col-span-6">
            <%= I18n.l(outflow.updated_at, format: :short) %>
          </div>
          <div class="col-span-12 justify-center">
            <button type='button' class="m-1 p-2 bg-blue-500 rounded-md shadow-sm text-xs text-white">
              <%= link_to I18n.t('helpers.buttons.show'), outflow_path(outflow) %>
            </button>
            <button type='button' class="m-1 p-2 bg-green-600 rounded-md shadow-sm text-xs text-white">
              <%= link_to I18n.t('helpers.buttons.edit'), edit_outflow_path(outflow) %>
            </button>
            <div class="inline-flex m-1 p-2 w-16 bg-red-600 rounded-md shadow-sm text-xs text-white">
              <%= button_to I18n.t('helpers.buttons.destroy'), outflow, method: :delete, data: { turbo_method: :delete, turbo_confirm: I18n.t('helpers.buttons.are_you_sure') } %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <br>
  <%= paginate @outflows %>
  <br>
</div>

<!--script>
  $( function() {
    $( "#outflow_created_at_from" ).datepicker();
    $( "#outflow_created_at_to" ).datepicker();
  } );
</script-->