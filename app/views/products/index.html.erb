<div class="m-3">
  <%= render 'shared/notice', notice: notice %>
  <%= render 'shared/alert', alert: alert %>

  <div class="w-full">
    <div class="w-full md:w-1/2 lg:w-3/12 inline-block mb-2">
      <h1 class="text-4xl font-medium"><%= I18n.t('activerecord.models.product.other') %></h1>
    </div>
    <div class="inline-block mr-4 mb-2">
      <%# unless current_user.nil? %>
        <%# if current_user.admin %>
          <button type="button" class="p-3 bg-blue-700 hover:bg-blue-800 rounded-md shadow-sm font-medium text-white">
            <%= link_to I18n.t('helpers.links.new_product'), new_product_path %>
          </button>
        <%# end %>
      <%# end %>
    </div>
    <div class="inline-block">
      <button type="button" class="p-3 bg-blue-700 hover:bg-blue-800 rounded-md shadow-sm font-medium text-white">
        <%= link_to I18n.t('helpers.buttons.update_stock'), mass_stock_products_path %>
      </button>
    </div>
  </div>

  <table class="table-auto w-7/8 m-2 p-2">
    <thead>
      <tr class="border border-gray-200 bg-gray-200  text-center text-xs text-gray-600 uppercase">
        <th class="py-2 md:px-6"><%= I18n.t('activerecord.attributes.products.name') %></th>
        <th class="py-2 md:px-6"><%= I18n.t('activerecord.attributes.products.price') %></th>
        <th class="py-2 md:px-6"><%= I18n.t('activerecord.attributes.products.stock') %></th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @products.order(name: :asc).each do |product| %>
        <tr class="border border-gray-200 bg-gray-100 hover:bg-gray-200">
          <td class="text-xs md:text-sm text-center"><%= product.name %></td>
          <td class="text-xs md:text-sm text-center">$<%= number_with_precision(product.price, strip_insignificant_zeros: true)%></td>
          <td class="text-xs md:text-sm text-center">
            <%= number_with_precision(product.stock, strip_insignificant_zeros: true) %><%= product.unit.capitalize %>
          </td>
          <td>
            <button type="button" class="m-1 p-1 md:p-2 bg-blue-500 hover:bg-blue-600 rounded-md shadow-sm text-xs text-white">
              <%= link_to I18n.t('helpers.buttons.show'), product_path(product) %>
            </button>
          </td>
          <%# unless current_user.nil? %>
            <%# if current_user.admin %>
              <td>
                <button type="button" class="m-1 p-1 md:p-2 bg-green-600 hover:bg-green-700 rounded-md shadow-sm text-xs text-white">
                  <%= link_to I18n.t('helpers.buttons.edit'), edit_product_path(product)%>
                </button>
              </td>
              <td>
                <div>
                  <%= button_to I18n.t('helpers.buttons.destroy'), product, method: :delete, data: { turbo_method: :delete, turbo_confirm: I18n.t('helpers.buttons.are_you_sure') }, class: 'm-1 p-2 bg-red-600 hover:bg-red-700 rounded-md shadow-sm text-xs text-white'%>
                </div>
              </td>
            <%# end %>
          <%# end %>
        </tr>
      <% end %>
    </tbody>
  </table>

  <%= paginate @products %>

</div>
