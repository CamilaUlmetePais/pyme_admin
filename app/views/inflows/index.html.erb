<div class="ml-2">
  <%= render 'shared/notice', notice: notice %>
  <%= render 'shared/alert', alert: alert %>

  <div class="grid grid-cols-6 m-2">
    <div class="col-span-3 self-center">
      <h1 class="text-4xl font-medium"><%= I18n.t('activerecord.models.inflow.other') %></h1>
    </div>
    <div class="col-span-3 self-center justify-self-end">
      <button type="button" class="p-3 bg-blue-700 hover:bg-blue-800 rounded-md shadow-sm font-medium text-white">
        <%= link_to I18n.t('helpers.links.new_inflow'), new_inflow_path %>
      </button>
    </div>
  </div>

  <%= render 'search_bar' %>

  <!-- Design for lg and xl viewports: table -->
  <div class="hidden lg:block">
    <table class="table-auto w-7/8 m-2 p-2">
      <thead>
        <tr class="border border-gray-200 bg-gray-200  text-center text-xs text-gray-600 uppercase">
          <th class="p-2"><%= I18n.t('activerecord.attributes.inflows.total') %></th>
          <th class="p-2"><%= I18n.t('activerecord.attributes.inflows.payment_method') %></th>
          <th class="p-2"><%= I18n.t('views.body.index.items') %></th>
          <th class="p-2"><%= I18n.t('activerecord.attributes.inflows.created_at') %></th>
          <th class="p-2"><%= I18n.t('activerecord.attributes.inflows.last_updated') %></th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @inflows.each do |inflow| %>
          <tr class="border border-gray-200 bg-gray-100 hover:bg-gray-200">
            <td class="text-center">
              $<%= number_with_precision(inflow.total, strip_insignificant_zeros: true) %>
            </td>
            <td class="text-center">
              <%= inflow.payment_method.capitalize %>
            </td>
            <td>
              <% inflow.items.each do |item| %>
                <span class="inline-block m-1 px-2 py-1 bg-sky-300 rounded-md shadow-sm">
                  <%= item.list %>
                </span>
              <% end %>
            </td>
            <td class="text-center text-xs">
              <%= I18n.l(inflow.created_at, format: :short) %>
            </td>
            <td class="text-center text-xs">
              <%= I18n.l(inflow.updated_at, format: :short) %>
            </td>
            <td>
              <button type='button' class="m-1 p-2 bg-blue-500 hover:bg-blue-600 rounded-md shadow-sm text-xs text-white">
                <%= link_to I18n.t('helpers.buttons.show'), inflow_path(inflow) %>
              </button>
            </td>
            <td>
              <button type='button' class="m-1 p-2 bg-green-600 hover:bg-green-700 rounded-md shadow-sm text-xs text-white">
                <%= link_to I18n.t('helpers.buttons.edit'), edit_inflow_path(inflow) %>
              </button>
            </td>
            <!--td>
              <button type='button'>
                <%= link_to I18n.t('helpers.buttons.expand'), expand_inflows_path(inflow) %>
              </button>
            </td-->
            <td>
              <div class="m-1 p-2 bg-red-600 hover:bg-red-700 rounded-md shadow-sm text-xs text-white">
                <%= button_to I18n.t('helpers.buttons.destroy'), inflow, method: :delete, data: { turbo_method: :delete, turbo_confirm: I18n.t('helpers.buttons.are_you_sure') } %>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <!-- Design for sm and md viewports: badges -->
  <div class="lg:hidden block">
    <% @inflows.each do |inflow| %>
      <div class="w-7/8 m-2 border border-gray-200 bg-gray-100 rounded-md shadow-sm">
        <div class="grid grid-cols-12 gap-1 p-1">
          <div class="col-span-6">
            <span class="text-xs uppercase text-gray-600"> 
              <%= I18n.t('activerecord.attributes.inflows.total') %>:
            </span>
            $<%= number_with_precision(inflow.total, strip_insignificant_zeros: true) %>
          </div>
          <div class="col-span-6">
            <%= inflow.payment_method.capitalize %>
          </div>
          <div class="col-span-12">
            <% inflow.items.each do |item| %>
              <span class="inline-block m-1 px-2 py-1 bg-sky-300 rounded-md shadow-sm">
                <%= item.list %>
              </span>
            <% end %>
          </div>
          <div class="col-span-6 text-xs uppercase text-gray-600">
            <%= I18n.t('activerecord.attributes.inflows.created_at') %>
          </div>
          <div class="col-span-6 text-xs uppercase text-gray-600">
            <%= I18n.t('activerecord.attributes.inflows.last_updated') %>
          </div>
          <div class="col-span-6">
            <%= I18n.l(inflow.created_at, format: :short) %>
          </div>
          <div class="col-span-6">
            <%= I18n.l(inflow.updated_at, format: :short) %>
          </div>
          <div class="col-span-12 justify-center">
            <button type='button' class="m-1 p-2 bg-blue-500 hover:bg-blue-600 rounded-md shadow-sm text-xs text-white">
              <%= link_to I18n.t('helpers.buttons.show'), inflow_path(inflow) %>
            </button>
            <button type='button' class="m-1 p-2 bg-green-600 hover:bg-green-700 rounded-md shadow-sm text-xs text-white">
              <%= link_to I18n.t('helpers.buttons.edit'), edit_inflow_path(inflow) %>
            </button>
            <div class="inline-flex m-1 p-2 w-16 bg-red-600 hover:bg-red-700 rounded-md shadow-sm text-xs text-white">
              <%= button_to I18n.t('helpers.buttons.destroy'), inflow, method: :delete, data: { turbo_method: :delete, turbo_confirm: I18n.t('helpers.buttons.are_you_sure') } %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <br>
  <%= paginate @inflows %>
  <br>
</div>